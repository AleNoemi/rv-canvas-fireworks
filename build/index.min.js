function FireworksCanvas(t){this.canvas=document.querySelector(t.id),this.context=this.canvas.getContext("2d"),this.context.fillStyle="rgb(0,0,0)",this.options=t}function Particle(t){this.position={x:t.position?t.position.x:START_POSITION.x,y:t.position?t.position.y:START_POSITION.y},this.velocity={x:t.velocity?t.velocity.x:0,y:t.velocity?t.velocity.y:2}}var START_POSITION={x:400,y:600},DIMENTIONS={width:3,height:3},PARTICLE_PATH_MIN=1.6,PARTICLE_PATH_MAX=-1.6,PARTICLE_PATH_DISTANCE=.1,PARTICLE_LIMIT=70,CLEAR_OPACITY=0;FireworksCanvas.prototype={init:function(){this.particlePathLimit=PARTICLE_LIMIT,this.gravity=.05,this.addParticles()},requestFrame:function(t){window.requestAnimationFrame(t)},setNewColor:function(){this.context.fillStyle=["rgb(",Math.floor(256*Math.random()),",",Math.floor(256*Math.random()),",",Math.floor(256*Math.random()),")"].join("")},addParticles:function(){for(var t=PARTICLE_PATH_MIN;t>=PARTICLE_PATH_MAX;){var i=new Particle({position:{x:START_POSITION.x,y:START_POSITION.y},velocity:{x:t,y:6}});this.requestFrame(this.animate.bind(this,i)),t-=PARTICLE_PATH_DISTANCE}this.particlePathLimit>0&&(this.particlePathLimit=this.particlePathLimit-1,this.requestFrame(this.addParticles.bind(this)))},getNewVelocity:function(t){return t.y=t.y-this.gravity,{x:t.x,y:t.y}},getNewPosition:function(t,i){return{x:t.x+i.x,y:t.y-i.y}},animate:function(t){var i,e=t.getPosition(),o=t.getVelocity();o=this.getNewVelocity(o),t.setVelocity(o.x,o.y),i=this.getNewPosition(e,o),this.clearPrevious(e.x,e.y),t.setPosition(i.x,i.y),this.setNewColor(),this.drawNext(i.x,i.y),i.y<START_POSITION.y&&this.requestFrame(this.animate.bind(this,t))},drawNext:function(t,i){this.context.fillRect(t,i,DIMENTIONS.width,DIMENTIONS.height)},clearPrevious:function(t,i){this.context.clearRect(t-1,i-1,DIMENTIONS.width+2,DIMENTIONS.height+2)}},Particle.prototype={getPosition:function(){return this.position},setPosition:function(t,i){this.position={x:t,y:i}},getVelocity:function(){return this.velocity},setVelocity:function(t,i){this.velocity={x:t,y:i}}};