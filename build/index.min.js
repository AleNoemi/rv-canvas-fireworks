function FireworksCanvas(t){this.defaults={gravity:.13,newParticlesMax:4,velocityX:2.5,velocityYmax:9},this.canvas=document.querySelector(t),this.context=this.canvas.getContext("2d"),this.context.fillStyle="#fff"}function getRandomArbitrary(t,i){return(Math.random()*(i-t)+t).toFixed(1)}function getRandomIntInclusive(t,i){return Math.floor(Math.random()*(i-t+1))+t}function extend(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n]);return t}var START_POSITION={x:400,y:600},DIMENTIONS={width:3,height:3};FireworksCanvas.prototype={init:function(t){this.options=extend(this.defaults,t),this.particles=[],this.frame=this.frame.bind(this)},start:function(){this.running=!0,this.frame()},stop:function(){this.running=!1},addParticles:function(){for(var t=getRandomIntInclusive(1,this.options.newParticlesMax);t>0;)this.particles.push(this.getParticles()),t--},getParticles:function(){var t=this.options.velocityX-2*this.options.velocityX,i=this.options.velocityX,n=this.options.velocityYmax;return{x:START_POSITION.x,y:START_POSITION.y,vX:getRandomArbitrary(t,i),vY:getRandomArbitrary(7,n)}},render:function(){var t=this;this.clearPrevious(),this.particles=this.particles.filter(function(i){return i.vY=i.vY-t.options.gravity,i.y=i.y-i.vY,i.x=i.x-i.vX,i.y<START_POSITION.y+DIMENTIONS.height?(t.setRandomColor(i),t.drawParticle(i),!0):!1})},frame:function(){this.running&&window.requestAnimationFrame(this.frame),this.addParticles(),this.render()},drawParticle:function(t){this.context.fillRect(t.x,t.y,DIMENTIONS.width,DIMENTIONS.height)},clearPrevious:function(){this.context.fillStyle="rgba(255, 255, 255, 0.2)",this.context.fillRect(0,0,this.canvas.width,this.canvas.height)},setRandomColor:function(t){var i=1;t.vY<0&&(i=i-t.y/START_POSITION.y+.15),this.context.fillStyle=["rgba(",Math.floor(256*Math.random()),",",Math.floor(256*Math.random()),",",Math.floor(256*Math.random()),",",i,")"].join("")}};