function FireworksCanvas(){this.defaults={gravity:.13,newParticlesMin:2,newParticlesMax:4,velocityXmin:-2.5,velocityXmax:2.5,velocityYmin:7,velocityYmax:9}}function extend(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n]);return t}var START_POSITION={x:400,y:600},DIMENTIONS={width:3,height:3};FireworksCanvas.prototype={init:function(t){this.options=extend(this.defaults,t),this.canvas=document.querySelector(this.options.id),this.context=this.canvas.getContext("2d"),this.context.fillStyle="#fff",this.stopped=0,this.particles=[],this.addParticles()},stop:function(){this.stopped=1,this.clearPrevious()},addParticles:function(){if(!this.stopped){var t=this.getRandomIntInclusive(this.options.newParticlesMin,this.options.newParticlesMax);this.particles=this.particles.concat(this.getParticles(t)),this.render()}},getParticles:function(t){for(var i=[],n=t;n>0;)i.push({x:START_POSITION.x,y:START_POSITION.y,vX:this.getRandomArbitrary(this.options.velocityXmin,this.options.velocityXmax),vY:this.getRandomIntInclusive(this.options.velocityYmin,this.options.velocityYmax)}),n--;return i},render:function(){var t,i=this;this.clearPrevious(),this.particles=this.particles.filter(function(n){return n.vY=n.vY-i.options.gravity,t=n.vY<0?"down":"up",n.y=n.y-n.vY,n.x=n.x-n.vX,n.y<START_POSITION.y+DIMENTIONS.height?(i.drawParticle(n.x,n.y,t),!0):!1}),window.requestAnimationFrame(function(){i.addParticles()})},drawParticle:function(t,i,n){this.setRandomColor(t,i,n),this.context.fillRect(t,i,DIMENTIONS.width,DIMENTIONS.height)},clearPrevious:function(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},setRandomColor:function(t,i,n){var e=1;"down"===n&&(e=e-i/START_POSITION.y+.15),this.context.fillStyle=["rgba(",Math.floor(256*Math.random()),",",Math.floor(256*Math.random()),",",Math.floor(256*Math.random()),",",e,")"].join("")},getRandomArbitrary:function(t,i){return(Math.random()*(i-t)+t).toFixed(1)},getRandomIntInclusive:function(t,i){return Math.floor(Math.random()*(i-t+1))+t}};