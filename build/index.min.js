function FireworksCanvas(t){this.defaults={gravity:.13,newParticlesMax:4,velocityX:2.5,velocityYmax:9},this.canvas=document.querySelector(t),this.context=this.canvas.getContext("2d"),this.context.fillStyle="#fff"}function getRandomArbitrary(t,i){return(Math.random()*(i-t)+t).toFixed(1)}function getRandomIntInclusive(t,i){return Math.floor(Math.random()*(i-t+1))+t}function extend(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n]);return t}var START_POSITION={x:400,y:600},DIMENTIONS={width:3,height:3};FireworksCanvas.prototype={init:function(t){this.options=extend(this.defaults,t),this.particles=[],this.frame=this.frame.bind(this)},start:function(){this.running=!0,this.frame()},stop:function(){this.running=!1},addParticles:function(){for(var t=getRandomIntInclusive(1,this.options.newParticlesMax);t>0;)this.particles.push(this.getParticles()),t--},getParticles:function(){var t=this.options.velocityX-2*this.options.velocityX,i=this.options.velocityX,n=this.options.velocityYmax;return{x:START_POSITION.x,y:START_POSITION.y,vX:getRandomArbitrary(t,i),vY:getRandomArbitrary(7,n)}},render:function(){var t,i=this;this.clearPrevious(),this.particles=this.particles.filter(function(n){return n.vY=n.vY-i.options.gravity,t=n.vY<0?"down":"up",n.y=n.y-n.vY,n.x=n.x-n.vX,n.y<START_POSITION.y+DIMENTIONS.height?(i.drawParticle(n.x,n.y,t),!0):!1})},frame:function(){this.running&&window.requestAnimationFrame(this.frame),this.addParticles(),this.render()},drawParticle:function(t,i,n){this.setRandomColor(t,i,n),this.context.fillRect(t,i,DIMENTIONS.width,DIMENTIONS.height)},clearPrevious:function(){this.context.fillStyle="rgba(255,255,255,0.05)",this.context.fillRect(0,0,this.canvas.width,this.canvas.height)},setRandomColor:function(t,i,n){var e=1;"down"===n&&(e=e-i/START_POSITION.y+.15),this.context.fillStyle=["rgba(",Math.floor(256*Math.random()),",",Math.floor(256*Math.random()),",",Math.floor(256*Math.random()),",",e,")"].join("")}};